# GEMINI.md

## Project Overview

This project, "Stable Diffusion Prompt Reader," is a Python-based utility designed to read, write, and manage metadata (prompts, settings, etc.) embedded in images generated by Stable Diffusion. It is a standalone tool that works outside of the web UI.

The application features two distinct user interfaces:
1.  A graphical user interface (GUI) built with `customtkinter`, providing a user-friendly, drag-and-drop experience for viewing and manipulating image metadata.
2.  A command-line interface (CLI) built with `click`, enabling batch processing and integration into scripts for reading, writing, and clearing metadata.

The core logic for both interfaces is encapsulated in the `ImageDataReader` class, which handles the parsing and manipulation of data from various image formats (`.png`, `.jpg`, `.webp`) and supports multiple Stable Diffusion software formats (e.g., A1111, ComfyUI, InvokeAI).

The project is managed using Poetry, with dependencies and entry points defined in `pyproject.toml`.

## Building and Running

The project is written in Python and its dependencies are listed in `pyproject.toml` and `requirements.txt`.

### Running from Source

**Prerequisites:**
*   Python 3.10+
*   `pip`

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/granoeste/stable-diffusion-prompt-reader-explorer.git
    cd stable-diffusion-prompt-reader-explorer
    ```

2.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Run the Application:**

    *   **To launch the GUI:**
        ```bash
        python -m sd_prompt_reader.app
        ```
        or
        ```bash
        python main.py
        ```
        (when not in an interactive terminal)

    *   **To use the CLI:**
        The CLI is exposed via the `sd-prompt-reader-cli` script when installed. To run it from source, you can invoke the `cli` module directly or use the `main.py` entrypoint in a terminal:
        ```bash
        python -m sd_prompt_reader.cli --help
        ```
        or
        ```bash
        python main.py --help
        ```

### Installing with pip

The `README.md` also indicates that the tool can be installed via `pip`, which is the recommended method for Linux users:
```bash
pip install sd-prompt-reader
```
This will install the following commands:
*   `sd-prompt-reader`: Launches the GUI.
*   `sd-prompt-reader-cli`: Accesses the CLI.

### Building Executables

The project uses `pyinstaller` (for Windows) and `py2app` (for macOS) to create standalone executables. These are likely run via custom build scripts, but the configuration is present in the repository.

## Development Conventions

*   **Code Style:** The project adheres to the **Black** code style, as indicated by the badge in the `README.md`.
*   **Dependency Management:** Project dependencies and script entry points are managed using **Poetry**, as defined in `pyproject.toml`. A `requirements.txt` file is also provided for standard pip-based installation.
*   **Modularity:** The application is well-structured, with clear separation of concerns:
    *   `sd_prompt_reader/app.py`: GUI application logic.
    *   `sd_prompt_reader/cli.py`: CLI application logic.
    *   `sd_prompt_reader/image_data_reader.py`: Core metadata processing logic, shared by both the GUI and CLI.
    *   `sd_prompt_reader/format/*.py`: Separate modules for parsing different prompt formats.
    *   `sd_prompt_reader/resources/`: Contains icons and other assets for the GUI.
*   **Testing:** (TODO: No explicit testing framework like `pytest` or `unittest` is immediately visible in the file structure. Tests may exist elsewhere or may be a part of the development workflow that is not captured in the repository's file listing.)
